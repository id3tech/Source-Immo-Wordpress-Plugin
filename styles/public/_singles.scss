html, body{ scroll-behavior: smooth;}

#top .si,
 .si{   
    
    &.listing-single, &.broker-single, &.office-single{
        .si-content{
            .si-part{
                &.si-allowed-elementor-typography{
                    *{
                        font-size: inherit;
                        font-family: inherit;
                        font-weight: inherit;
                        color: inherit;
                        text-transform: inherit;
                        font-style: inherit;
                        text-decoration: inherit;
                        line-height: inherit;
                        letter-spacing: inherit;
                    }
                }
                //display:contents;
            }
        }
    }

    .si-part{
        &.si-part-tabs{
            overflow:hidden;
        }

        &.si-allowed-elementor-typography{
            *{
                font-size: inherit;
                font-family: inherit;
                font-weight: inherit;
                color: inherit;
                text-transform: inherit;
                font-style: inherit;
                text-decoration: inherit;
                line-height: inherit;
                letter-spacing: inherit;
            }
        }
        //display:contents;
    }

    // ---------------
    // Listing
    // ---------------
    &.listing-single{
        min-height:60vh;
        position:relative;
        // @include gridAreas('ref-number','subcategory','price','city','medias','flags',
        // 'description','addendum','information_request','links',
        // 'location','address','near','region','state','country',
        // 'brokers','name','contact','phone','photo','tools',
        // 'mortgage-calculator','actions','open-houses','attachments');
        label.placeholder{
            padding:20px;font-weight: 400;opacity:0.75;text-align:center;text-transform: uppercase;
            position: absolute;
            top:50%;
            left:50%;
            transform:translate(-50%,-50%);

            .fa-spinner-third{
                display:block;
                font-size:250px;
                margin:15vh auto;
                opacity:0.5;
            }
        }
        .si-custom-content, .si-content{display:none;}
        .si-content{
            transition:0.25s;opacity:0;
            // @include gridAreas(
            // 'si-header','si-summary','si-details','si-left','si-right');

            padding: 1rem 0;
            gap:var(--layout-gutter);
            grid-template-columns: 1fr;
            grid-template-rows: auto;
            //align-items: start;
            // grid-template-areas: 
            //     "si-header si-header"
            //     "medias si-summary"
            //     "si-details si-details"
            //     ;
            // .si-part{
            //     &.si-part-header{
            //         grid-column: 1 / span 2;
            //     }
            //     &.si-part-details{
            //         grid-column: 1 / span 2;
            //     }
            //     &.si-part-list-navigation{
            //         grid-column: 1 / span 2;
            //     }
            // }

            &.si-adapt-tablet-size,
            &.si-adapt-phone-size,
            &.si-adapt-small-phone-size{
                grid-template-columns: 1fr;
                .si-part{
                    &.si-part-header{
                        grid-column: 1;
                    }
                    &.si-part-list-navigation{
                        grid-column: 1;
                    }
                }
                .si-listing-navigation{
                    grid-column:1;
                }
                .si-details{
                    grid-column:1;
                }
            }

            @include media($tablet){
                grid-template-columns: 1fr;
                .si-part{
                    &.si-part-header{
                        grid-column: 1;
                    }
                }
                .si-listing-navigation{
                    grid-column:1;
                }
                .si-details{
                    grid-column:1;
                }
            }
            
            
        }
        .si-header{
            display:grid;
            gap:0 var(--layout-gutter);
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: auto;
            
            // grid-template-areas: 
            //     "subcategory subcategory subcategory price price price price" 
            //     "city city city price price price price"
            //     "tools tools tools tools tools information_request information_request";
            
            .si-part{
                &.si-part-header-price{
                    grid-column: 4 / span 4;
                    grid-row: 1 / span 2;
                }
                &.si-part-header-tools{
                    grid-column: 1 / span 5;
                    justify-self: end;
                }
                &.si-part-info-request-button{
                    grid-column: 6 / span 2;
                }
            }
            > .subcategory{
                grid-column: 1 / span 3;
            }
            > .city{
                grid-column: 1 / span 3;
            }

            &.is-sold{
                // grid-template-areas: 
                //     "subcategory subcategory subcategory price price price price" 
                //     "city city city price price price price"
                //     "tools tools tools tools tools tools tools";
                // .information_request{display:none;}
                .si-part{
                    &.si-part-header-tools{
                        grid-column: 1 / span 7;
                    }
                    &.si-part-info-request-button{
                        display:none;
                    }
                }
            }

            @include media($tablet){
                grid-template-columns: 1fr 1fr;
                place-items:center;
                // grid-template-areas:
                //     "subcategory"
                //     "city"
                //     "price"
                //     "tools"
                //     "information_request"
                // ;
                .subcategory{
                    grid-column: 1 / -1;
                }
                
                .si-part{
                    &.si-part-header-city{
                        grid-column: 1 / -1;
                        grid-row:2;
                    }
                    &.si-part-header-price{
                        grid-column: 1 / -1;
                        grid-row:2;
                    }
                    &.si-part-header-tools{
                        grid-column: 1;
                        place-self: center start;
                    }
                    &.si-part-info-request-button{
                        grid-column: 2;
                        place-self: center end;
                    }
                }
            }
            
            @include media($phone){
                place-items:center;
                text-align:center;
                .si-part{
                    &.si-part-header-tools{
                        grid-column: 1 / -1;
                        place-self: center;
                    }
                    &.si-part-info-request-button{
                        grid-column: 1 / -1;
                        place-self: center;
                    }
                }
            }
            
            .subcategory{line-height: 1em;}
            

            .information_request{
                place-self: stretch;
                text-align:center;
                
                //grid-column-span: 2;
                button{
                    width:100%;
                    display:block;padding:1em 2em;
                    border:none;
                    font-family: var(--button-font-name);
                }
                @include media($phone){
                    place-self:center;
                    //grid-column-span: unset;
                }
            }

            .tools{
                
                button{
                    background-color:var(--button-alt-bg-color);
                    color:var(--button-alt-text-color);
                    padding:1em 1em;
                    border:none;
                    &:hover{
                        background-color:var(--button-alt-hover-bg-color);
                        color:var(--button-alt-hover-text-color);
                    }

                    &.active{
                        background-color:var(--highlight);
                        color:var(--highlight-text-color);
                        &:hover{
                            background-color:var(--highlight);
                            color:var(--highlight-text-color);
                        }
                    }
                } 
                @include media($phone){
                    
                    place-self:center;
                }
            }
            .subcategory{
                font-size:2em;font-weight:600;
                text-transform: uppercase;
                @include media($tablet){
                    grid-column: 1 / -1;
                    place-self:center;
                }
            }
            .city{
                font-size:1.75em;font-weight: 300;
                place-self: center self-start;
                @include media($tablet){
                    grid-column: 1 / -1;
                    place-self:center;

                }
            }
            
        }
        .si-part-header{
            &.si-adapt-tablet-size,
            &.si-adapt-phone-size{
                .si-header{
                    place-items:center;
                    text-align:center;
                    grid-template-columns: 1fr 1fr;
                    gap: 1rem;
                    
                    
                    .si-part{
                        &.si-part-header-price{
                            grid-column: 1 / span 2;
                            grid-row:2;
                        }
                        &.si-part-header-tools{
                            grid-column: 1;
                            place-self: center start;
                        }
                        &.si-part-info-request-button{
                            grid-column: 2;
                            place-self: center end;
                        }
                    }
                    > .subcategory{
                        grid-column: 1 / span 2;
                    }
                    > .city{
                        grid-column: 1 / span 2;
                        place-self: center;
                    }
                }
            }
            &.si-adapt-small-phone-size{
                .si-header{
                    place-items:center;
                    text-align:center;
                    grid-template-columns: 1fr;
                    gap: 1rem;
                    
                    
                    .si-part{
                        &.si-part-header-price{
                            grid-column: 1;
                            grid-row:2;
                        }
                        &.si-part-header-tools{
                            grid-column: 1;
                            place-self: center;
                        }
                        &.si-part-info-request-button{
                            grid-column: 1;
                            place-self: center;
                        }
                    }
                    > .subcategory{
                        grid-column: 1;
                    }
                    > .city{
                        grid-column: 1;
                        place-self: center;
                    }
                }
            }
        }

        .price{
            font-size:1.75em;font-weight: 600;
            place-self: start end;
            text-align:right;
            
            .mortgage{
                font-size:0.5em;font-weight:400;
                a{border-bottom:dotted 1px rgba(#000,0.75);outline:none;}
            }
            @include media($phone){
                place-self:center;
                text-align:center;
                
                > div:first-child{
                    
                }
            }
        }
        
        .si-mediabox{
            position:relative;    
            place-self: stretch;
            --ratio-num: 4;
            --ratio-div: 3;
            --ratio: var(--ratio-num) / var(--ratio-div);
            --invert-ratio: var(--ratio-div) / var(--ratio-num);
            
            //aspect-ratio: var(--ratio);
            
            @supports not (aspect-ratio: 1 / 1){
                //height: calc(2rem + (var(--viewport-width) * var(--invert-ratio)));    
            }
            

            // --viewport-height: 460px;
            // @include media($laptop){
            //     --viewport-height:380px;
            // }
            @include media($tablet){
            //     --viewport-height:300px;
            }
            @include media($phone){
            //     --viewport-height:calc(100% - 40px);
                    --viewport-width: 100vw;
            }
            @include media($tablet){
                --viewport-height: var(--viewport-height-tablet)!important;
            }

            @include media($phone){
                --viewport-height: var(--viewport-height-mobile)!important;
                width: 100vw;
                margin-left: -50vw;
                //height: 40vh;
                //min-height:var(--viewport-height);
                left: 50%;
                //min-height:400px;
            }
            &.picture-list-thumbnails{
                @include media($phone){
                    min-height: 475px;
                }
            }

            .tabs{
                //@include media($phone){
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    gap:0.5rem;
                //}
                .tab{
                    display:inline-block;
                    background:none;color:var(--text-color);
                    font-weight: 400;
                    transition:0.25s;
                    outline:none;
                    position:relative;
                    border:0;
                    box-shadow:none;
                    padding: 0.5em 1em;
                    transition:0.25s;
                    font-size:1rem;
                    cursor:pointer;
                    i{color:inherit;}
                    &::after,&::before{
                        content:"";
                        background-color:var(--highlight);
                        height:3px;width:0px;
                        position: absolute;bottom:0px;
                        left:50%;transform:translateX(-50%);
                        transition:0.25s;
                    }
                    @include media($phone){
                        span{display:none;}
                    }
                    &.selected{
                        font-weight: 600;
                        color:var(--highlight);
                        &::after{
                            width:100%;
                            background-color:var(--highlight);
                        }
                    }
                    &.videos{
                        &::before{
                            width:100%;
                            background-color: var(--text-color);
                        }
                        // background:#333;
                        // color:#fff;
                        // &.selected{
                        //     background:#fff;
                        //     color:#333;
                        // }
                    }

                    &.virtual-tours{
                        // background:#333;
                        // color:#fff;
                        // &.selected{
                        //     background:#fff;
                        //     color:#333;
                        // }
                        &::before{
                            width:100%;
                            background-color: var(--text-color);
                        }
                    }
                }
            }
            > .viewport{
                position:relative;
                width:100%;
                // height:460px;
                // height:var(--viewport-height);
                aspect-ratio: var(--ratio);
                @supports not (aspect-ratio: 1 / 1){
                    height: calc(var(--viewport-width) * var(--invert-ratio));
                }

                overflow:hidden;
                // @include media($laptop){
                //     height:380px;
                // }
                // @include media($tablet){
                //     height:300px;
                // }
                // @include media($phone){
                //     height:calc(100% - 40px);
                // }
                

                > .trolley{
                    height:100%;width:100%;
                    position:absolute;top:0px;left:0px;
                    display:grid;
                    grid-gap:0;
                    grid-template-rows: 100%;
                    grid-template-columns: repeat(5,100%);
                    place-items:stretch;
                    transition:0.25s;
                    .tab-content {
                        position:relative;
                        iframe{border:none;width:100%;height:100%;}
                    }
                    .placeholder{
                        position:absolute;
                        font-size:3em;opacity:0.2;
                        width:100%;text-align: center;
                        transition:0.25s;
                        pointer-events: none;
                        top:50%;transform:translateY(-50%);
                    }
                }
            }
            
            .picture-gallery{
                width:100%;height:100%;
                overflow:hidden;
                display:grid;
                grid-template-columns:1fr;
                grid-template-rows:1fr auto;
            }
            &.select-pictures{
                >.viewport>.trolley{
                    transform:translateX(0);
                    .placeholder{opacity:0;}
                }
            }
            &.select-videos{
                >.viewport>.trolley{
                    transform:translateX(-100%);
                    .placeholder{opacity:0;}
                }
            }
            &.select-virtual-tours{
                >.viewport>.trolley{
                    transform:translateX(-200%);
                    .placeholder{opacity:0;}
                }
            }
            &.select-streetview{
                >.viewport>.trolley{
                    transform:translateX(-300%);
                    .placeholder{opacity:0;}
                }
            }
            &.select-map{
                >.viewport>.trolley{
                    transform:translateX(-400%);
                    .si-map-container{
                        margin:0;
                    }
                    .placeholder{opacity:0;}
                }
            }

            .viewport{
                .video{
                    background:#aaa;
                }
                .streetview{
                    background:#A0E3FA;
                    .detail-streetview{
                        position: absolute;
                        top:0px;left:0px;width:100%;height:100%;
                        .viewport{width:100%;height:100%;}
                    }
                }
                .map{
                    background:#CCF7E2;
                    .detail-map{
                        position: absolute;
                        top:0px;left:0px;width:100%;height:100%;
                        .viewport{width:100%;height:100%;}
                    }
                    .locallogic-content-widget-container{
                        position: absolute;
                        top:0px;left:0px;width:100%;height:100%;
                    }
                }
            }
        }
        .si-summary{
            
            display:grid;
            grid-gap:0 1rem;
            grid-template-columns: 1fr;
           
            @include media($tablet){
                grid-template-columns: 1fr;
            }

            
        }

        .si-part-location{
            text-align:center;

            .location-path{
                display:flex;
                flex-wrap: wrap;
                justify-content: center;
                gap:0.5ex;

                > div:not(:last-child){
                    &::after{
                        content:",";
                    }
                }
            }
        }

        .ref-number{
            opacity:0.5;
            &:before{content:var(--uls-label);}
        }
        .address{
            font-weight: 600;
            text-transform: uppercase;
        }
        .near{
            opacity:0.75;
        }
        .state{
            place-self: self-end;
            @include media($small-phone){
                place-self: start;
            }
        }
        .description{
            
        }
        .legal-notes{
            display:grid;
            grid-template-columns: auto 1fr;
            place-items: start stretch;
            font-size:0.8rem;
            padding:1rem 0;
            gap:0.5rem;
            opacity:0.75;
            i{line-height: 1rem;}
        }
        
        .attachments{
            padding:20px 0;

            
            @include media($phone){
                flex-direction:column;
            }
            .attachment{
                a{
                    padding:10px;
                    display:grid;
                    grid-template-columns: auto 1fr;
                    place-items:start;
                    gap:0 1rem;
                    @include media($phone){
                        place-items:center start;
                        grid-template-columns: auto 1fr;
                    }
                }
                i{
                    font-size:3rem;
                    grid-row: 1 / span 2;
                    grid-column: 1;

                    @include media($phone){
                        margin-right: 10px;
                        font-size:1.7rem;
                    }
                }
                .attachment-category{
                    text-transform: uppercase;
                }
                .attachment-description{font-size:0.8rem;}
                .far::before{content:"\f15b";}
                
                &.pdf{
                    .far::before{content:"\f1c1";}
                }
                &.doc,&.docx{
                    .far::before{content:"\f1c2";}
                }
                &.xls,&.xlsx{
                    .far::before{content:"\f1c3";}
                }
            }
            
        }
        .links{

            display:flex;
            flex-direction: row;
            justify-content: space-around;

            .link{
                margin: 0 1em;
                &.website{
                    .far::before{content:"\f57d"}
                }
            }
        }


        .flags{
            display:flex;
            justify-content: center;
            align-items: center;
            flex-wrap:wrap;
            padding:0;
            gap:1rem;
            .flag{
                position:relative;
                margin: calc(var(--layout-gutter) / 2);
                text-align:center;
                display:grid;
                width:3rem;
                grid-template-rows: 1fr 1.4rem;
                place-items:center;
                i{
                    font-size:1.8rem;
                    text-align:center;
                    color:var(--text-color);
                }
                em{
                    display:block;
                    font-size:1rem; font-style:normal;
                    text-align:center;
                    font-weight: 700;
                    white-space: nowrap;
                }
            }
        }

        .open-houses{
            background:#555;
            border-radius:3px;
            color:#fff;
            padding:10px;
            margin-top:10px;
            h4{
                font-weight: 300;
                text-transform: uppercase;
                color:inherit;
            }
            .open-house-list{
                .open-house-item{
                    display:grid;
                    @include gridAreas('date','start','end');
                    grid-template-columns : 1fr auto auto;
                    grid-template-areas: "date start end";
                    gap:var(--layout-gutter);
                    place-items: end start;
                    @include media($phone){
                        grid-template-columns : 1fr 1fr;
                        grid-template-areas: "date date" "start end";
                        place-items: center;
                    }
                    
                    .date{
                        .day{font-size:0.75em;font-style:italic;}
                        .time-ago{font-size:1.2em;text-transform: uppercase;}
                    }
                    .start, .end{
                        font-size:1.2em;
                        text-align:center;
                        label{display:block;font-size:0.75em;color:inherit;margin:0px;}
                        div{
                            display:inline-block;
                            padding:5px 10px;
                            font-weight: 700;
                            background:#dedede;
                            color:#333;
                            border-radius:3px;
                        }
                    }
                    
                }
            }
        }

        .si-details{
            display:grid;
            gap:var(--layout-gutter);
            grid-template-columns: 2fr 1fr;
            grid-template-rows: auto;
            grid-template-areas: "si-left si-right";
            grid-column: 1 / span 2;
            &.si-adapt-tablet-size,
            &.si-adapt-phone-size,
            &.si-adapt-small-phone-size{
                grid-template-columns: 1fr;
                grid-template-areas: "si-left" "si-right";
                grid-column:1;
            }
            
            @include media($tablet){
                grid-template-columns: 1fr;
                grid-template-areas: "si-left" "si-right";
                grid-column:1;
            }
        }

        

        .spec-grid{
            display:grid;
            grid-gap: 1rem;
            grid-template-columns: repeat(2, 1fr);
            .spec{
                display:block;
                label{font-weight: 600;margin:0px;}
                div{
                    span{
                        font-size:0.9em;
                        &:after{
                            content: ", "
                        }
                        &:last-child{
                            &:after{content:"";}
                        }
                    }
                }
            }
            @include media($small-phone){
                grid-template-columns: 1fr;
            }

            .special-box{
                grid-column: 1 / span 2;
                padding:10px 0;
                background:var(--small-contrast-color);
                color:var(--small-contrast-text-color);
                border-radius:var(--element-border-radius);
                display:flex;                
                gap:10px;
                flex-direction: row;
                justify-content: center;
                align-items: center;

                > div{
                    display:grid;
                    grid-template-columns:1fr;
                    grid-template-rows:1fr auto;
                    grid-template-areas:"label" "value";
                    place-items:center;
                    text-align:center;
                }
                label{margin:0px;grid-area:label;font-style:italic;color:inherit;}
                .value{font-weight: 600;grid-area:value;font-size:2em;color:inherit;}
                @include media($phone){
                    .value{font-size: 1.5em};
                }

                @include media($small-phone){
                    display: grid;
                    grid-column:unset;
                    grid-template-columns: 1fr max-content;
                    grid-template-rows:auto;
                    place-items:center stretch;
                    padding:10px;
                    gap:0px 10px;
                    > div{
                        display:contents;
                    }
                    .value{text-align:right;    font-size: 1.25em;}
                    label{text-align:left;}
                    label,.value{grid-area:unset;}
                }
            }
        }
        
        .addendum{
            .content{
                white-space: pre-wrap;
            }
        }

        .broker-list{
            .si-list-header{display:none;}
            .si-list{
                display:grid;
                gap:var(--layout-gutter);
                grid-template-columns: 1fr 1fr;
                @include media($phone){
                    grid-template-columns: 1fr;
                }
                .si-item{
                    background:var(--small-contrast-color);
                    color:var(--small-contrast-text-color);
                    border-radius: var(--element-border-radius);
                    overflow:hidden;
                }
            }
        }

        .mortgage-calculator{
            background-color:var(--medium-contrast-color);
            color:var(--medium-contrast-text-color);
            border-radius: var(--element-border-radius);
            overflow:hidden;

            .si-calculator{padding:1.5rem;}
            .si-title{
                font-size:1.5rem;padding:1.5rem;
                padding-bottom:0;
                @include media($small-phone){
                    text-align:center;
                    //i{display:block;}
                }
            }
            
            .result{
                background:var(--high-contrast-color);
                color:var(--high-contrast-text-color);
                padding:1.5rem;
                text-align:center;
                display:grid;
                grid-template-columns: 1fr max-content;
                place-items: center end;
                .result-item{
                    display:contents;
                    label,.value{
                        //text-align:right;
                        padding:0.5em 2em;
                    }
                }

                .mortgage,.transfer-taxes{
                    
                    margin-bottom:10px;
                    color:var(--high-contrast-text-color);
                    flex:1;
                }
                .mortgage{
                    font-size:1.2rem;
                }
                .transfer-taxes{
                    font-size:1rem;
                }
                
                @include media($phone){
                    grid-template-columns: 1fr;
                    gap:0rem;
                    place-items: center;
                    .result-item{
                    
                        label,.value{
                            padding:0em 2em;
                        }
                        .value{
                            padding-bottom:1em;
                        }
                    }
                }
                label{
                    color:inherit;opacity:0.5;
                    font-size:1.25em;
                }
                .value{
                    color:inherit;
                    line-height: 1;
                    padding: 0.25rem;
                    
                    em{font-size:1.5em;display:block;font-style:normal;}
                    span{font-size:1em;}
                }
            }
            .notice{
                grid-column: 1 / -1;
                margin-top:20px;
                font-size:0.8rem;
                opacity:0.33;
                line-height:1.4em;
                font-style: italic;
            }
        }
        .in-exclusions{
            label{font-weight: 700;}
        }
        .rooms{
            .unit-list{
                .si-title{
                    display:grid;
                    grid-template-columns: 1fr auto;
                }
                .flags{
                    display:grid;
                    grid-template-columns: 1fr repeat(calc(var(--unit-flag-count) + 1), auto);
                    gap:0px;
                    margin:10px auto;
                    place-items:center end;
                    background-color:var(--small-contrast-color);
                    border-radius: var(--element-border-radius);
                    overflow: hidden;
                    .unit-name{
                        place-self: center start;
                        padding: var(--layout-gutter);
                        h4{margin:0;}
                        .area{
                            display:block;
                            font-size: 1rem;
                            font-weight: 400;
                        }
                    }
                    .flag{
                        padding:10px 20px;
                        border-left:var(--element-border);
                        background-color:var(--small-contrast-color);
                        width: unset;
                        margin: 0;

                        label,em{display:block;text-align:center;color:var(--small-contrast-text-color);}
                        label{margin:0px;text-transform: lowercase;}
                        em{background:none;padding-top:4px;font-size:25px;color:var(--small-contrast-text-color);position:relative;width:100%;}
                    }
                    @include media($phone){
                        grid-template-columns: 1fr;
                        place-items: stretch;
                        margin:0 0 10px 0;
                        padding:0;
                        background:unset;
                        border:none;
                        .spacer{display:none;}
                        .flag{
                            display:flex;
                            flex-direction: row;
                            align-items: center;
                            border-left:none;
                            label{
                                order:-1;
                                flex-grow: 1;
                                text-align:left;
                            }
                            em{
                                width:auto;
                                padding:0;
                            }
                            .fal{
                                font-size:35px;
                            }
                        }
                        
                    }
                }

                .room-list{
                    @include gridLayout('1fr','auto',0);

                    .room-item{
                        &:nth-child(odd){
                            background:var(--small-contrast-color);
                            --text-color: var(--small-contrast-text-color);
                        }
                        &.list-header{
                            background:transparent;
                            border-bottom:solid 1px var(--medium-contrast-color);
                            > *{font-size:0.8em;font-style:italic;opacity:0.5;padding-right:5px;}
                            @include media($phone){
                                display:none;
                            }
                        }


                        @include gridLayout('auto 1fr auto 200px','auto',0px 10px);
                        @include gridAreas('type','level','floor','area','infos');
                        grid-template-areas:
                                "type type floor level"
                                "area infos infos infos"
                            ;
                        padding: 5px 10px;
                        .type{font-weight: 700;text-transform: uppercase;}
                        .level{place-self:center end;}
                        .area{font-style:italic;}
                        .infos{
                            font-style:italic;
                            .flooring{
                                display:inline-block;
                                padding-right:0px;
                            }
                            span:nth-child(2){
                                &:before{content:", ";}
                            }
                        }
                        @include media($phone){
                            grid-template-columns: 1fr max-content;
                            grid-template-areas: 
                                "type area" 
                                "floor floor"
                                "infos level";
                            .type,.floor,.area,.infos{
                                place-self: center start;
                            }
                            .level{
                                place-self: center end;
                            }
                        }
                        @include media($small-phone){
                            grid-template-columns: 1fr;
                            grid-template-areas: 
                                "type" 
                                "area"
                                "floor"
                                "level"
                                "infos";
                            .type,.floor, .level,.area,.infos{
                                place-self: center center;
                                text-align:center;
                            }
                        }
                    }
                }
            }
            
        }

        .expenses, .assessments, .incomes{
            &:not(:first-child){
                h4{margin-top:1rem;}
            }
            .label-value{
                display:flex;
                justify-content: space-between;
                align-items:center;
                .value{font-weight: 700;}
            }
        }

        .si-listing-navigation{
            @include media-gt($laptop){
                grid-column: 1 / -1;
            }
        }

        &.loaded{
            .si-content{
                display:grid;
                opacity:1;
            }
            .si-custom-content{
                display:block;
            }
        }

        &.si-expend-sections{
            .detail-section{
                margin-bottom: 1.5rem;

                > .si-title{
                    pointer-events: none;
                    .icon{
                        display:none;
                    }
                }
                .detail-section-content{
                    max-height:unset;
                }
            }
        }
    }

    // ---------------
    // Broker
    // ---------------
    &.broker-single{
        --left-column : 1;
        --right-column: 2;
        min-height:50vh;
        position:relative;
        label.placeholder{
            padding:20px;font-weight: 400;opacity:0.75;text-align:center;text-transform: uppercase;
            position: absolute;
            top:50%;
            left:50%;
            transform:translate(-50%,-50%);
        }
        .si-custom-content, .si-content{display:none;}
        .si-content{
            //@include gridAreas('left-column','right-column');
            gap: var(--layout-gutter);
            label.placeholder{
                padding:20px 0;
                opacity:0.5;
                text-transform:uppercase;
            }
           
        }

        .si-part{
            // &.si-part-infos{
            //     grid-row:1 / span 2;
            //     grid-column: 1;
            // }
            // &.si-part-picture{
            //     grid-row:1;
            //     grid-column: 2;
            // }
            // &.si-part-rating{
            //     grid-row:2;
            //     grid-column:2;
            // }

            // &.si-part-listings{
            //     grid-column: 1 / span 2;
            // }
        }


        .si-part-infos{
            display:grid;
            grid-template-columns: 1fr 1fr 1fr;
            place-items: start stretch;
            gap: calc(var(--layout-gutter) * 2);
            

            .si-row{
                display:grid;
                gap:var(--layout-gutter);
                grid-column: 1 / span 2;
                grid-template-columns: 1fr 1fr;

                .si-part-rating{
                    place-self: center end;
                }
                &.si-element-border{
                    border-left:none;
                    border-right:none;
                }
            }
            .si-part-picture{
                grid-column: 3;
                grid-row:1 / span 4;
            }
            .si-part{
                &.si-part-name, &.si-part-about{
                    grid-column: 1 / span 2;
                }
            }
        }

        .si-part{
            &.si-part-specs{
                .specs{
                    display:grid;
                    gap: calc(var(--layout-gutter) / 2);
                    .si-extra-item{
                        display:grid;
                        grid-template-columns: auto 1fr;
                        place-items: center stretch;
        
                        label{
                            
                        }
                        .si-value{
                            font-weight: 700;
                            text-align:right;
        
                            &.si-multiple{
                                span{
                                    &::before{
                                        content: ", ";
                                    }
                                    &:first-child{
                                        &::before{
                                            content: unset;
                                        }
                                    }
                                }
                            }
                        }

                        &.protections{
                            .si-value{
                                > span {
                                    > span::after{
                                            content:", ";
                                    }
                                    &:last-child{
                                        > span::after{
                                            content:unset;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }

            &.si-part-reviews{

                .si-rating{
                    .si-star-rating {
                        --star-padding: 0.5rem;
                        --star-size: 5rem;
                        .si-label{
                            font-size: 2rem;
                        }
                        @include media($phone){
                            --star-size: 3rem;
                        }
                    }
                }
                .si-review-list{
                    display:grid;
                    grid-template-columns: repeat(2,1fr);
                    grid-auto-flow: dense;
                    padding: var(--layout-gutter) 0;
                    gap: var(--layout-gutter);
                    @include media($phone){
                        grid-template-columns: 1fr;
                    }
                    .si-review-item{
                        padding:2rem;
                        display:grid;
                        grid-template-rows: 1fr auto;
                        position:relative;
                        
                        .si-index{
                            font-size: 3rem;
                            border-bottom: solid 1px currentColor;
                            
                            &::after{
                                content: ".";
                            }

                        }

                        

                        .si-text{
                            margin-bottom:10px;
                            position:relative;
                            overflow:visible; 
                            position:relative;
                            //padding: 2rem;

                            &::before{
                                content:"\f10d";
                                font-family: "Font Awesome 5 Pro";
                                font-weight: 700;
                                font-size: 2rem;
                                display:block;
                                // position: absolute;
                                // top:0;
                                // left:0px;
                                opacity:0.5;

                            }

                            &::after{
                                content:"\f10e";
                                font-family: "Font Awesome 5 Pro";
                                font-weight: 700;
                                font-size: 8rem;
                                display:block;
                                position: absolute;
                                right: 0rem;
                                bottom:0;
                                line-height: 1;
                                opacity: 0.05;
                                line-height: 1;
                                transform:translateY(50%);
                            }
                        }
                        .si-info{
                            display: flex;
                            flex-direction: row;
                            align-items: center;
                            
                        }
                        .si-author{
                            font-size: 1.5rem;
                            //text-align:center;
                        }
                        .si-date{
                            //text-align:center;
                            font-size: 0.8rem;
                            .ago{opacity:0.75;}
                        }

                        &.big{
                            grid-row: span 3;
                        }
                        &.medium{
                            grid-row: span 2;
                            
                        }
                    }
                }
            }

            &.si-part-rating{
                .comments-link{
                    cursor: pointer;
                    opacity:0.8;
                    text-decoration: underline;
                }
            }
        }
        
        .about{
            .button{display:none;}
            .si-text{
                p:first-child{margin-top:0px;}
            }

            
        }

        .name{margin-bottom:0px;}
        .license-title{
            font-size:1.3em;
            text-transform:uppercase;
            opacity: 0.75;
        }
        
        .picture{
            
            background: url('assets/shadow_broker.jpg') no-repeat;
            background-size: cover;
            align-self: stretch;
            justify-self: stretch;
            
            min-height: 380px;
            img{
                display:block;
                text-indent: -1000px;
                height: 100%;
                width: 100%;
                object-fit: cover;
                object-position: center;
                min-height: inherit;
            }
        }
        .contact{
            
            
            .phone-list{
                .item{
                    font-size:1.25rem;
                    padding:0.5rem 0; 
                    color: var(--text-color);
                }
            }
            .actions{
            }
        }

        
        

        .listing-list{
            .list-container{
                display:grid;
                gap:var(--layout-gutter);
                grid-template-columns: repeat(var(--desktop-column-width),1fr);
                place-items: stretch;
                
                @include media($laptop){
                    grid-template-columns: repeat(var(--laptop-column-width),1fr);
                }
                @include media($tablet){
                    grid-template-columns: repeat(var(--tablet-column-width),1fr);
                }
                @include media($phone){
                    grid-template-columns: repeat(var(--mobile-column-width),1fr);
                }
                > div{
                    display:grid;place-items:stretch;
                    transition:0.25s;
                }
            }
        }
        .office{
            
            .item-content{

                display:grid;
                grid-template-columns: 1fr;
                .name{
                    text-transform: uppercase;
                }
                .location{
                    @include gridAreas('icon','address','city','country');
                
                    display:grid;
                    grid-template-columns: auto 1fr;
                    gap:0 1rem;
                    grid-template-areas: 
                        "icon address"
                        "icon country"
                    ;
                }
                
            }
        }
        .cities{
            
            padding:10px;
            .city{
                display:inline-block;
                padding: 10px;margin:5px;
                border: var(--element-border);
                border-radius: var(--element-border-radius);
                transition:0.25s;
                &:hover{
                    background: var(--button-alt-bg-color);
                    color: var(--button-alt-text-color);
                }
            }
        }
        
        .si-content{
            &.si-adapt-tablet-size{
                grid-template-columns:2fr 3fr;
                .si-part-picture{grid-column:1;grid-row:1 / span 2;}
                .si-part-head{grid-column:2;grid-row:1;}
                
                .si-part-contact{grid-column:2;grid-row:2;}
                
                .si-part-bio{grid-column: 1 / span 2;grid-row:3;}
                
                
                .si-part-listings{grid-column:1 / span 2;grid-row:5;}
                .si-part-cities{grid-column:2;grid-row:6;}
                .si-part-office{grid-column:1;grid-row:6;}
            }
            &.si-adapt-phone-size{
                grid-template-columns:1fr;
                
                .si-part-head{grid-column:1;grid-row:1;}
                .si-part-bio{grid-column: 1;grid-row: 3;}
                .si-part-picture{grid-column:1;grid-row:2;}
                .si-part-contact{grid-column:1;grid-row:4;}
                
                .si-part-listings{grid-column:1;grid-row:5;}
                .si-part-cities{grid-column:1;grid-row:7;}
                .si-part-office{grid-column:1;grid-row:6;}
            }
        }

        @include media($tablet){
            .si-part-infos{
                grid-template-columns: 1fr 1fr;
                .si-part{
                    
                    &.si-part-contact{
                        grid-column: 2;
                        grid-row:2;
                    }
                    &.si-part-office{
                        grid-column: 2;
                        grid-row:3;
                    }
                }
                .si-part-picture{
                    grid-column: 1;
                    grid-row:2 / span 2;
                    
                }
            }
        }
        @include media($phone){
            .si-part-infos{
                grid-template-columns: 1fr;
                .si-part{
                    grid-column:1!important;
                    &.si-part-name{
                        place-self: center;
                        text-align:center;
                    }
                    &.si-part-contact{
                        place-self: center;
                        text-align:center;
                        grid-row:unset;
                    }
                    &.si-part-office{
                        place-self: center;
                        text-align:center;
                        grid-row:unset;
                    }

                }
                .si-row{
                    grid-column:1;
                    grid-template-columns: 1fr;
                    .si-part-rating{
                        place-self: center;
                    }
                }
            }

            
            
            .si-part-picture{
                grid-column: 1;
                grid-row:2;
                
            }
        }
        &.loaded{
            .si-content{
                display:grid;
            }
            .si-custom-content{
                display:block;
            }
        }
    }

    // ---------------
    // Office
    // ---------------
    &.office-single{
        min-height:50vh;
        
        label.placeholder{
            padding:20px;font-weight: 400;opacity:0.75;text-align:center;text-transform: uppercase;
        }
        .si-custom-content, .si-content{display:none;}
        .si-content{
            
            grid-template-columns: 1fr;
            grid-template-rows: auto;
            place-items: start stretch;
            gap: var(--layout-gutter);

            label.placeholder{
                padding:20px 0;
                opacity:0.5;
                text-transform:uppercase;
            }           
        }

        .head{
            // grid-column: 2;
            // grid-row: 1;
            // @include media($phone){
            //     grid-column: 1 / span 3;
            //     grid-row:unset;
            // }
            .name{margin-bottom:0px;}
            @include media($phone){
                text-align: center;
            }
        }

        .bio{
            grid-column: 1 / -1;
            column-count: 2;
            column-gap: 1rem;
            @include media($phone){
                grid-row:unset;
                column-count: 1;
            }
            
            .button{display:none;}
            p:first-child{margin-top:0px;}
            &.long{
                .text{
                    max-height:calc(4 * 1.55em);
                    transition:0.25s;
                    overflow:hidden;
                }
                &.expanded{
                    .text{
                        max-height:2000px;
                    }
                }
                .button{display:initial;}
            }
        }

        .address{
            display:grid;
            grid-template-columns: auto 1fr;
            i.fa-map-marker-alt{padding:5px;}   
            @include media($phone){
                grid-template-columns: 1fr;
                place-items:center;
                text-align: center;
                i.fa-map-marker-alt{
                    display:none;
                }
            } 
        }

        .picture{
            grid-column: 1;
            grid-row: 1;
            max-width:250px;
            border-bottom: solid 25px #ccc;
            display:none;
            @include media($phone){
                grid-column: 1 / span 3;
                grid-row:unset;
            }
        }
        .contact{
            // grid-column: 3;
            // grid-row: 1;
            display:grid;
            gap:var(--layout-gutter);
            padding:10px;
            @include media($phone){
                .phone-list{
                    i.fal{
                        display:none;
                    }
                }
            }

            // .phone-list{
            //     .item{font-size:1.5em;}
            // }
            .actions{
                padding:10px;
                text-align:center;
            }
        }
        .office-list-tabs{
            grid-column: 1 / -1;
            //grid-row: 3;
            @include media($phone){
                grid-row:unset;
            }
        }
        .broker-list{
            .list-container{
            }
        }
        .listing-list{
            .list-container{
            }
        }

        &.loaded{
            .si-content{
                display:grid;
            }
            .si-custom-content{
                display:block;
            }
        }
    }

    // ---------------
    // Agency
    // ---------------
    &.agency-single{
        min-height:50vh;
        
        label.placeholder{
            padding:20px;font-weight: 400;opacity:0.75;text-align:center;text-transform: uppercase;
        }
        .si-custom-content, .si-content{display:none;}
        .si-content{
            
            grid-template-columns: 1fr;
            grid-template-rows: auto;
            place-items: start stretch;
            gap: var(--layout-gutter);

            label.placeholder{
                padding:20px 0;
                opacity:0.5;
                text-transform:uppercase;
            }           
        }

        .head{
            // grid-column: 2;
            // grid-row: 1;
            // @include media($phone){
            //     grid-column: 1 / span 3;
            //     grid-row:unset;
            // }
            @include media($phone){
                text-align: center;
            }

            .name{margin-bottom:0px;}
            
        }

        .bio{
            grid-column: 1 / -1;
            column-count: 2;
            column-gap: 1rem;
            @include media($phone){
                grid-row:unset;
                column-count: 1;
            }
            
            .button{display:none;}
            p:first-child{margin-top:0px;}
            &.long{
                .text{
                    max-height:calc(4 * 1.55em);
                    transition:0.25s;
                    overflow:hidden;
                }
                &.expanded{
                    .text{
                        max-height:2000px;
                    }
                }
                .button{display:initial;}
            }
        }

        .main-office-address{
            display:grid;
            grid-template-columns: auto 1fr;
            i.fa-map-marker-alt{padding:5px;}    
             @include media($phone){
                grid-template-columns: 1fr;
                place-items:center;
                text-align: center;
                i.fa-map-marker-alt{
                    display:none;
                }
            }
        }

        .picture{
            grid-column: 1;
            grid-row: 1;
            max-width:250px;
            border-bottom: solid 25px #ccc;
            display:none;
            @include media($phone){
                grid-column: 1 / span 3;
                grid-row:unset;
            }
        }
        .contact{
            // grid-column: 3;
            // grid-row: 1;
            display:grid;
            gap:var(--layout-gutter);
            padding:10px;
            @include media($phone){
                .phone-list{
                    i.fal{
                        display:none;
                    }
                }
            }

            // .phone-list{
            //     .item{font-size:1.5em;}
            // }
            .actions{
                padding:10px;
                text-align:center;
            }
        }
        .office-list-tabs{
            grid-column: 1 / -1;
            //grid-row: 3;
            @include media($phone){
                grid-row:unset;
            }
        }
        .broker-list{
            .list-container{
            }
        }
        .listing-list{
            .list-container{
            }
        }
        .office-list{
            
            .si-office-item{
                
                .si-data-label{
                    text-align:left;
                    @include media($phone){
                        text-align:center;
                    }
                }
                .name{
                    padding: var(--element-padding);
                    padding-bottom:0;
                }
                .address{
                    padding-top:0;
                }
                .office-counters{
                    display:none;
                }

                &.is-main-office{
                    grid-column:1;
                    grid-row:1;
                }
            }
        }

        .si-part{
            &.list-layout-mode-flex{
                .office-list{
                    .si-list{
                        display:flex;
                        flex-direction: row;
                        flex-wrap: wrap;   

                        .si-item.is-main-office{
                            order:-1;
                        }
                    }
                }
            }
        }
        &.loaded{
            .si-content{
                display:grid;
            }
            .si-custom-content{
                display:block;
            }
        }
    }
}
#top .si{
    &.listing-single,
    &.broker-single{
        > .container{margin:40px auto;}
    }
}